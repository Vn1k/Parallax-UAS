import React, { useEffect, useRef, useState } from "react";
import './home.css';
import { ReactComponent as SvgImage } from '../../../ASET/SVG/SNAPVER.svg';
import AOS from 'aos';
import 'aos/dist/aos.css';
import anime from "animejs";

function Home () {
  const [cursorPosition, setCursorPosition] = useState({x:0, y:0});
  const scrollWrapperRef = useRef(null);

  useEffect(() => {
    // Mengatur interval autoscroll
    const interval = setInterval(() => {
      const scrollWrapper = scrollWrapperRef.current;
      if (scrollWrapper) {
        // Menghitung posisi scroll yang baru
        const scrollPosition = scrollWrapper.scrollLeft + scrollWrapper.clientWidth;

        // Menganimasikan scroll
        anime({
          targets: scrollWrapper,
          scrollLeft: scrollPosition,
          duration: 1000,
          easing: 'easeInOutQuad',
        });

        // Memeriksa apakah sudah mencapai akhir konten
        if (scrollPosition >= scrollWrapper.scrollWidth) {
          // Mengatur scroll kembali ke awal
          anime({
            targets: scrollWrapper,
            scrollLeft: 0,
            duration: 1000,
            easing: 'easeInOutQuad',
          });
        }
      }
    }, 5000); // Interval autoscroll dalam milidetik

    return () => {
      // Membersihkan interval saat komponen unmount
      clearInterval(interval);
    };
  }, []);

  useEffect(() => {
    anime({
      targets: "#bg-home img",
      translateX: -cursorPosition.x,
      translateY: -cursorPosition.y,
      duration: 1000,
      easing: 'easeOutQuad',
    });
  }, [cursorPosition]);

  return (
    <div id="Home" onMouseMove={(event)=>{
      let movement_x = event.clientX * 0.05;
      let movement_y = event.clientY * 0.05;
      setCursorPosition({x: movement_x, y: movement_y})
    }}>
      <section id="top">
        <div className="external">
          <div className="horizontal-scroll-wrapper" ref={scrollWrapperRef}>
          <div class="img-wrapper slower">
                        <img src={Pic1} alt="" className="m3"/>
                    </div>

                    <div class="img-wrapper faster">
                        <img src={Pic2} alt="" className="m3"/>
                    </div>

                    <div class="img-wrapper slower vertical">
                        <img src={Pic3} alt="" className="m3"/>
                    </div>

                    <div class="img-wrapper slower slower-down">
                        <img src={Pic4} alt="" className="m3"/>
                    </div>

                    <div class="img-wrapper">
                        <img src={Pic5} alt="" className="m3"/>
                    </div>

                    <div class="img-wrapper slower">
                        <img src={Pic6} alt="" className="m3"/>
                    </div>

                    <div class="img-wrapper faster1">
                        <img src={Pic7} alt="" className="m3"/>
                    </div>
                    
                    <div class="img-wrapper slower slower2">
                        <img src={Pic8} alt="" className="m3"/>
                    </div>
                    
                    <div class="img-wrapper">
                        <img src={Pic9} alt="" className="m3"/>
                    </div>
                    
                    <div class="img-wrapper slower">
                        <img src={Pic10} alt="" className="m3"/>
                    </div>
                    
                    <div class="img-wrapper slower last">
                        <img src={Pic11} alt="" className="m3"/>
                    </div>
          </div>
        </div>
        <div data-aos="fade-up" data-aos-easing="ease-out-sine" data-aos-anchor-placement="0">
                    <SvgImage id='logovertical'/>
                    <object id="background-logo"></object>
                </div>
                <div id="logoo">
                    <img src={Logom} alt="" id="logoje" />
                </div>
                <div id="credit">
                    <p>Credit by <strong>MOYSHI</strong></p>
                </div>
      </section>
    </div>
  );
}

AOS.init();

export default Home;
